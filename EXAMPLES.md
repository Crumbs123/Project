# 📚 Примеры работы с системой

## 🎯 Сценарий 1: Производство грудинки копченой (100 кг)

### Шаг 1: Открытие формы производства
1. Войдите в систему (admin/admin123)
2. Перейдите на вкладку **"Производство"**
3. Нажмите **"+ Новое производство"**

### Шаг 2: Выбор продукта
1. В выпадающем списке выберите **"Грудинка копченая"**
2. Система автоматически загрузит рецепт:

```
╔═══════════════════════════════════════════════════════════╗
║  ИНГРЕДИЕНТЫ (на 100 кг готовой продукции)              ║
╠═══════════════════════════════════════════════════════════╣
║ Ингредиент          │ На 100кг │ Ед.изм. │ На складе    ║
╠═══════════════════════════════════════════════════════════╣
║ Свинина (грудинка)  │  120.00  │   кг    │   500.00    ║
║ Соль поваренная     │    2.50  │   кг    │   100.00    ║
║ Специи для копчения │    0.50  │   кг    │    50.00    ║
╚═══════════════════════════════════════════════════════════╝
```

### Шаг 3: Указание количества
1. Введите количество продукции: **100 кг**
2. Система пересчитает требуемое сырье (коэффициент = 100/100 = 1):
   - ✅ Свинина: 120.00 кг (доступно: 500.00 кг)
   - ✅ Соль: 2.50 кг (доступно: 100.00 кг)
   - ✅ Специи: 0.50 кг (доступно: 50.00 кг)

**Статус:** ✓ Все ингредиенты доступны на складе

### Шаг 4: Дополнительные параметры
```
Время копчения: 12 часов
Температура: 65°C
Примечания: Стандартная партия
```

### Шаг 5: Сохранение
После нажатия **"Сохранить"**:

**АВТОМАТИЧЕСКИ происходит:**
1. ✅ Списание сырья:
   - Свинина: 500.00 - 120.00 = 380.00 кг
   - Соль: 100.00 - 2.50 = 97.50 кг
   - Специи: 50.00 - 0.50 = 49.50 кг

2. ✅ Добавление готовой продукции:
   - Грудинка копченая: 0 + 100.00 = 100.00 кг

3. ✅ Создание записи производства:
   - Дата: текущая
   - Оператор: admin
   - Выход: 83.33%

**Результат:** 
```
╔═════════════════════════════════════════════════╗
║  ✓ Производство завершено!                     ║
║                                                 ║
║  Произведено: 100.00 кг                        ║
║  Использовано сырья: 123.00 кг                 ║
║  Выход: 81.30%                                 ║
╚═════════════════════════════════════════════════╝
```

---

## 🎯 Сценарий 2: Производство с недостатком сырья

### Шаг 1: Выбор продукта
Выбираем **"Ребрышки копченые"**, количество: **200 кг**

### Шаг 2: Проверка наличия
Система пересчитывает (коэффициент = 200/100 = 2):

```
╔═══════════════════════════════════════════════════════════╗
║  ПРОВЕРКА НАЛИЧИЯ СЫРЬЯ                                  ║
╠═══════════════════════════════════════════════════════════╣
║ Ингредиент          │ Требуется │ Доступно │ Статус      ║
╠═══════════════════════════════════════════════════════════╣
║ Свинина (ребра)     │  250.00   │  380.00  │ ✅ OK       ║
║ Соль поваренная     │    4.00   │   97.50  │ ✅ OK       ║
║ Специи для копчения │    2.00   │   49.50  │ ✅ OK       ║
╚═══════════════════════════════════════════════════════════╝
```

**Статус:** ✓ Все ингредиенты доступны на складе

### Если бы не хватало:
```
╔═══════════════════════════════════════════════════════════╗
║  ❌ НЕДОСТАТОЧНО СЫРЬЯ                                   ║
╠═══════════════════════════════════════════════════════════╣
║ ⚠️ Свинина (ребра): требуется 500.00 кг,                ║
║                     доступно 380.00 кг                   ║
║ ⚠️ Специи: требуется 4.00 кг, доступно 2.50 кг          ║
╚═══════════════════════════════════════════════════════════╝

Продолжить производство? [Да] [Нет]
```

---

## 📊 Сценарий 3: Создание детального отчета

### Шаг 1: Установка фильтра
```
Период с: 01.01.2026
      по: 15.02.2026
```
Нажмите **"Применить"**

### Шаг 2: Экспорт
1. Нажмите **"📄 Экспорт в Word"**
2. Выберите **"📊 Детальный отчет по производству"**
3. Укажите имя файла: `Детальный_отчет_15-02-2026.docx`

### Результат в Word:
```
═══════════════════════════════════════════════════════════
          ДЕТАЛЬНЫЙ ОТЧЕТ ПО ПРОИЗВОДСТВУ
═══════════════════════════════════════════════════════════

Период: с 01.01.2026 по 15.02.2026
Дата формирования: 15.02.2026 14:30

┌─────┬──────────────────┬─────────┬──────────┬────────────┐
│ ID  │ Продукция        │ Сырье   │ Исполь-  │ Произве-   │
│     │                  │         │ зовано   │ дено       │
├─────┼──────────────────┼─────────┼──────────┼────────────┤
│ 15  │ Грудинка копченая│ Свинина │ 120.00   │ 100.00     │
│ 15  │ Грудинка копченая│ Соль    │   2.50   │ 100.00     │
│ 15  │ Грудинка копченая│ Специи  │   0.50   │ 100.00     │
├─────┼──────────────────┼─────────┼──────────┼────────────┤
│ 16  │ Ребрышки копченые│ Свинина │ 250.00   │ 200.00     │
│ 16  │ Ребрышки копченые│ Соль    │   4.00   │ 200.00     │
│ 16  │ Ребрышки копченые│ Специи  │   2.00   │ 200.00     │
└─────┴──────────────────┴─────────┴──────────┴────────────┘

СВОДНАЯ СТАТИСТИКА
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• Всего записей производства: 6
• Использовано сырья: 379.00 кг
• Произведено продукции: 300.00 кг
• Средний выход: 79.15%

                           Отчет сформирован: Иванов Иван
```

---

## 📈 Сценарий 4: Создание сводного отчета

### Выбор типа: **"📈 Сводный отчет по продукции"**

### Результат в Word:
```
═══════════════════════════════════════════════════════════
            СВОДНЫЙ ОТЧЕТ ПО ПРОДУКЦИИ
═══════════════════════════════════════════════════════════

Период: с 01.01.2026 по 15.02.2026

┌────────────────────┬─────────┬────────┬───────────┬────────┐
│ Продукция          │ Тип     │ Партий │ Использо- │ Произ- │
│                    │         │        │ вано сырья│ ведено │
├────────────────────┼─────────┼────────┼───────────┼────────┤
│ Ребрышки копченые  │ Копчено │   2    │  512.00   │ 400.00 │
│ Грудинка копченая  │ Копчено │   3    │  369.00   │ 300.00 │
│ Окорок копченый    │ Копчено │   1    │  118.80   │ 100.00 │
│ Корейка копченая   │ Копчено │   1    │  121.40   │ 100.00 │
└────────────────────┴─────────┴────────┴───────────┴────────┘

ТОП-5 ПРОДУКЦИИ ПО ОБЪЕМУ ПРОИЗВОДСТВА
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. Ребрышки копченые - 400.00 кг
2. Грудинка копченая - 300.00 кг
3. Окорок копченый - 100.00 кг
4. Корейка копченая - 100.00 кг
```

---

## 📝 Сценарий 5: Отчет по рецептам и остаткам

### Выбор типа: **"📝 Отчет по рецептам и сырью"**

### Результат в Word:
```
═══════════════════════════════════════════════════════════
           ОТЧЕТ ПО РЕЦЕПТАМ И СЫРЬЮ
═══════════════════════════════════════════════════════════

ГРУДИНКА КОПЧЕНАЯ
Тип: Грудинка копченая

┌──────────────────────┬─────────┬────────┬─────────┐
│ Ингредиент           │ На 100кг│ Ед.изм.│ На скл. │
├──────────────────────┼─────────┼────────┼─────────┤
│ Свинина (грудинка)   │ 120.00  │   кг   │ 380.00  │
│ Соль поваренная      │   2.50  │   кг   │  97.50  │
│ Специи для копчения  │   0.50  │   кг   │  49.50  │
└──────────────────────┴─────────┴────────┴─────────┘

ОКОРОК КОПЧЕНЫЙ
Тип: Окорок копченый

┌──────────────────────┬─────────┬────────┬─────────┐
│ Ингредиент           │ На 100кг│ Ед.изм.│ На скл. │
├──────────────────────┼─────────┼────────┼─────────┤
│ Свинина (окорок)     │ 115.00  │   кг   │ 350.00  │
│ Соль поваренная      │   3.00  │   кг   │  97.50  │
│ Специи для копчения  │   0.80  │   кг   │  49.50  │
└──────────────────────┴─────────┴────────┴─────────┘

ОСТАТКИ СЫРЬЯ НА СКЛАДЕ
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

┌──────────────────────┬──────────┬────────┬─────────┐
│ Сырье                │ Количест.│ Ед.изм.│ Статус  │
├──────────────────────┼──────────┼────────┼─────────┤
│ Свинина (грудинка)   │  380.00  │   кг   │🟢Норм.  │
│ Свинина (окорок)     │  350.00  │   кг   │🟢Норм.  │
│ Соль поваренная      │   97.50  │   кг   │🟢Норм.  │
│ Специи для копчения  │   49.50  │   кг   │🟠Низкий │
│ Сахар                │   15.00  │   кг   │🔴Критич.│
└──────────────────────┴──────────┴────────┴─────────┘

Цветовая индикация:
🟢 Зеленый - нормальный уровень (выше 150% от минимума)
🟠 Оранжевый - низкий уровень (100-150% от минимума)
🔴 Красный - критический уровень (ниже минимума)
```

---

## 💡 Полезные советы

### 1. Планирование производства
```sql
-- Узнать, сколько можно произвести при текущих остатках
SELECT 
    p.ProductName,
    MIN(rm.Quantity / r.RequiredQuantity * 100) AS 'Максимум (кг)'
FROM Products p
JOIN Recipes r ON p.ProductID = r.ProductID
JOIN RawMaterials rm ON r.MaterialID = rm.MaterialID
GROUP BY p.ProductID, p.ProductName;
```

### 2. Контроль качества
- Всегда проверяйте цветовую индикацию перед производством
- Зеленый = можно производить
- Оранжевый = скоро нужно пополнить
- Красный = срочно пополнить!

### 3. Оптимизация
- Производите большие партии для экономии
- Следите за выходом продукции (норма 80-85%)
- Регулярно создавайте отчеты для анализа

### 4. Работа с отчетами
- **Детальный** - для ежедневного контроля
- **Сводный** - для анализа эффективности
- **Рецепты** - для планирования закупок

---

## 🔍 Проверка корректности работы

### Тест 1: Проверка рецептов
```sql
-- Должно показать все рецепты
SELECT COUNT(*) FROM Recipes;
-- Ожидаемый результат: 12 (4 продукта × 3 ингредиента)
```

### Тест 2: Проверка удаления
```sql
-- Не должно найти "Сало украинское"
SELECT * FROM Products WHERE ProductName LIKE '%украинское%';
-- Ожидаемый результат: 0 записей
```

### Тест 3: Проверка списания
1. Запомните остаток свинины на складе
2. Создайте производство 100 кг грудинки
3. Проверьте остаток - должно списаться 120 кг

---

## 📞 Что делать если...

### Не видно рецептов в производстве
1. Проверьте выполнение `recipes_setup_v2.sql`
2. Убедитесь в наличии данных:
   ```sql
   SELECT * FROM Recipes;
   ```

### Не создается отчет Word
1. Проверьте установку пакета DocX
2. Убедитесь в правах на запись

### Неправильно списывается сырье
1. Проверьте рецепты в БД
2. Убедитесь в корректности коэффициента

---

## 🎓 Обучение новых операторов

### День 1: Основы
- Вход в систему
- Навигация по интерфейсу
- Просмотр остатков

### День 2: Производство
- Создание производства
- Работа с рецептами
- Проверка наличия сырья

### День 3: Отчетность
- Создание отчетов
- Анализ данных
- Планирование

**Успехов в работе! 🚀**
